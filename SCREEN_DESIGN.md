# Stock Portfolio App - 화면 설계서

## 1. 메인 화면 (포트폴리오 대시보드)

### 1.1 레이아웃

```
┌─────────────────────────────────────┐
│                              ⚙️     │  ← Navigation Bar (타이틀 없음)
├─────────────────────────────────────┤
│   ┌───────────────┬───────────────┐ │
│   │ 투자 금액      │ 남은 현금      │ │  ← 2단 레이아웃
│   │ ₩ 50,000,000 │ ₩ 50,000,000  │ │
│   │ 50%          │ 50%           │ │  ← 비율 표시
│   └───────────────┴───────────────┘ │
│                                     │
│          [파이 차트]                  │
│                                     │
│      ●  삼성전자  40%                 │  ← 차트 중앙
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ● 삼성전자 40%   ● 카카오 20% │   │  ← 커스텀 범례 (2열)
│  │ ● SK하이닉스 30% ● NAVER 10% │   │  ← 스크롤 가능
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  보유 종목 (6/10)                    │  ← 현재/전체 개수 표시
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐  │
│  │ 삼성전자                    40% │  │
│  │ ₩ 4,000,000                   │  │  ← 종목 1
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │ SK하이닉스                   30% │  │
│  │ ₩ 3,000,000                   │  │  ← 종목 2
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │ 카카오                       20% │  │
│  │ ₩ 2,000,000                   │  │  ← 종목 3~6 (최대 6개)
│  └───────────────────────────────┘  │
│  ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐  │
│  │      ↓ 슬라이드하여 더 보기 ↓    │  │  ← 더보기 힌트 (6개 초과 시)
│  └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘  │
│                                     │
│              [ + ]                  │  ← Floating Action Button
└─────────────────────────────────────┘
```

### 1.2 UI 요소

#### Navigation Bar
- **제목**: 없음 (타이틀 숨김)
- **배경**: 투명
- **스타일**: Inline (타이틀 없이 툴바만 표시)
- **우측 버튼**: ⚙️ (설정 아이콘)
  - SF Symbol: "gearshape"
  - 액션: 시드머니 설정 시트 표시

#### 시드머니 정보 섹션
- **"총 시드머니" 레이블/금액**: 숨김 (Hidden)
- **2단 레이아웃 (투자/현금)**: 표시 유지

**2단 레이아웃 (투자/현금):**
- **배경**: 카드 형태
- **레이아웃**: HStack (2개 컬럼)
- **코너 반경**: 12pt

**좌측 (투자 금액):**
- 레이블: "투자 금액" (`.caption`, `.secondary`)
- 금액: "₩ 50,000,000" (`.title3`, `.bold`)
- 비율: "50%" (`.headline`, `.blue`)

**우측 (남은 현금):**
- 레이블: "남은 현금" (`.caption`, `.secondary`)
- 금액: "₩ 50,000,000" (`.title3`, `.bold`)
- 비율: "50%" (`.headline`, `.green`)

- **여백**: 좌우 16pt

#### 파이 차트 섹션
- **차트 크기**:
  - 레이아웃: AspectRatio 1:1 (정사각형)
  - 최대 높이: 250pt
  - 반응형: 화면 너비에 맞춰 자동 조정
- **타입**: Pie Chart (Swift Charts)
- **색상**: 자동 할당 (최대 10개 구분 가능한 색상)
- **인터랙션**:
  - 탭하면 해당 종목 하이라이트
  - 커스텀 범례 표시 (2열 그리드, 스크롤 가능)
- **여백**: 상하 16pt
- **컨테이너**: 고정 높이 제거, 동적 높이 사용

#### 커스텀 범례 (Chart Legend)
- **레이아웃**: LazyVGrid (2열)
  - 컬럼: 2개의 flexible 컬럼
  - 간격: 12pt (horizontal), 8pt (vertical)
- **스크롤**:
  - ScrollView 활성화 (종목이 많을 경우)
  - 최대 높이: 제한 없음 (동적)
- **범례 아이템**:
  - 색상 인디케이터: 8x8pt 원형
  - 종목명: `.caption` 폰트
  - 비중: `.caption` 폰트, 회색
  - 레이아웃: HStack (색상 + 종목명 + 비중)
- **배경**: 투명
- **여백**: 상 12pt

#### 보유 종목 리스트
- **섹션 헤더**: "보유 종목 (표시개수/전체개수)"
  - 폰트: `.headline`
  - 여백: 좌 16pt
  - 예시: "보유 종목 (6/10)" - 10개 중 6개 표시
- **표시 제한**:
  - **기본 표시**: 최대 6개
  - **추가 표시**: 스크롤/슬라이드로 나머지 표시
  - **접힌 상태**: 6개 초과 시 "더 보기" 힌트 표시
- **리스트 아이템**:
  - 배경: 카드 형태 (흰색/다크모드 대응)
  - 코너 반경: 12pt
  - 섀도우: 경미한 그림자
  - 여백: 좌우 16pt, 상하 8pt

**리스트 아이템 내부:**
```
┌─────────────────────────────────┐
│ [색상 인디케이터] 삼성전자     40% │  ← 좌측 5pt 색상 바
│ ₩ 4,000,000                     │
└─────────────────────────────────┘
```
- **좌측**: 5pt 너비 색상 인디케이터 (차트와 동일한 색상)
- **종목명**:
  - 폰트: `.headline`
  - 색상: `.primary`
- **비중**:
  - 폰트: `.headline`
  - 색상: `.secondary`
  - 위치: 우측 정렬
- **금액**:
  - 폰트: `.subheadline`
  - 숫자: 모노스페이스
  - 색상: `.secondary`

**더 보기 힌트 (6개 초과 시):**
- **조건**: 종목이 6개를 초과할 때만 표시
- **텍스트**: "↓ 슬라이드하여 더 보기"
- **폰트**: `.caption`
- **색상**: `.tertiary`
- **애니메이션**: 부드러운 페이드 효과

#### Floating Action Button (+)
- **아이콘**: SF Symbol "plus.circle.fill"
- **크기**: 56x56pt
- **위치**: 우측 하단 (16pt margin)
- **색상**: `.accentColor` (파란색)
- **액션**: 종목 추가 시트 표시

### 1.3 인터랙션

- **설정 버튼 (⚙️)**: 시드머니 설정 시트 표시
- **스와이프 삭제**: 우측에서 좌측으로 스와이프하여 종목 삭제 (유일한 삭제 방법)
  - swipeActions 사용 (trailing edge)
  - allowsFullSwipe: true (전체 스와이프로 즉시 삭제)
  - 삭제 아이콘: trash (SF Symbol)
- **탭**: 종목 탭하면 편집 시트 표시 (삭제 버튼 없음)
- **+ 버튼**: 종목 추가 시트 표시
- **차트 탭**: 해당 종목 하이라이트
- **종목 리스트 스크롤**: 6개 초과 시 스크롤하여 나머지 종목 표시

---

## 2. 시드머니 설정 화면 (Sheet)

### 2.1 레이아웃

```
┌─────────────────────────────────────┐
│  ✕  시드머니 설정                     │  ← Sheet Header
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │  ← ScrollView 시작
│ │   총 시드머니                     │ │
│ │   ┌───────────────────────────┐ │ │
│ │   │ ₩ 100,000,000             │ │ │  ← TextField (숫자)
│ │   └───────────────────────────┘ │ │
│ │                                 │ │
│ │   💡 투자 가능한 총 금액을 입력하세요│ │  ← 안내 문구
│ │                                 │ │
│ └─────────────────────────────────┘ │  ← ScrollView 끝
│                                     │
│   ┌─────────────────────────────┐   │  ← safeAreaInset 영역
│   │        저장                  │   │  ← Primary Button
│   └─────────────────────────────┘   │
│                                     │
│   ┌─────────────────────────────┐   │
│   │        취소                  │   │  ← Secondary Button
│   └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 2.2 UI 요소

#### 레이아웃 구조
- **구조**: ScrollView + safeAreaInset
  - ScrollView: 입력 필드와 안내 문구 포함
  - safeAreaInset: 버튼 영역 (항상 하단 고정)
- **장점**:
  - 키보드 표시 시 자동 스크롤
  - 버튼 항상 접근 가능
  - 작은 화면 대응

#### Sheet Header
- **좌측**: ✕ 버튼 (닫기)
- **중앙**: "시드머니 설정" 제목
  - 폰트: `.headline`
- **높이**: 60pt

#### 시드머니 입력
- **레이블**: "총 시드머니"
  - 폰트: `.subheadline`
  - 색상: `.secondary`
- **TextField**:
  - Placeholder: "₩ 0"
  - 키보드: 숫자 패드
  - 배경: 시스템 회색 배경
  - 패딩: 12pt
  - 코너 반경: 8pt
  - 포맷: 통화 포맷 (자동 천단위 구분)

#### 안내 문구
- **텍스트**: "💡 투자 가능한 총 금액을 입력하세요"
- **폰트**: `.footnote`
- **색상**: `.secondary`

#### 저장 버튼
- **스타일**: Prominent Button
- **배경**: `.accentColor` (파란색)
- **텍스트**: "저장" (흰색, `.headline`)
- **높이**: 50pt
- **코너 반경**: 12pt
- **상태**:
  - 비활성: 금액이 0 이하일 때
  - 활성: 금액 입력 완료

#### 취소 버튼
- **스타일**: Secondary Button
- **배경**: 투명
- **텍스트**: "취소" (`.accentColor`, `.headline`)
- **높이**: 50pt
- **액션**: 시트 닫기

### 2.3 인터랙션

- **입력 검증**:
  - 금액: 0보다 커야 함, 음수 불가
  - 조건 미충족 시 저장 버튼 비활성화
- **저장 액션**:
  1. UserDefaults에 저장
  2. 시트 닫기
  3. 메인 화면 자동 업데이트
- **취소 액션**: 시트 닫기 (저장 안 함)

---

## 3. 종목 추가 화면 (Sheet)

### 2.1 레이아웃

```
┌─────────────────────────────────────┐
│  ✕  종목 추가                        │  ← Sheet Header
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │  ← ScrollView 시작
│ │   종목명                         │ │
│ │   ┌───────────────────────────┐ │ │
│ │   │ 삼성전자                   │ │ │  ← TextField
│ │   └───────────────────────────┘ │ │
│ │                                 │ │
│ │   매수 금액                      │ │
│ │   ┌───────────────────────────┐ │ │
│ │   │ ₩ 1,000,000               │ │ │  ← TextField (숫자)
│ │   └───────────────────────────┘ │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │  ← ScrollView 끝
│                                     │
│   ┌─────────────────────────────┐   │  ← safeAreaInset 영역
│   │        저장                  │   │  ← Primary Button
│   └─────────────────────────────┘   │
│                                     │
│   ┌─────────────────────────────┐   │
│   │        취소                  │   │  ← Secondary Button
│   └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 2.2 UI 요소

#### 레이아웃 구조
- **구조**: ScrollView + safeAreaInset
  - ScrollView: 입력 필드 포함
  - safeAreaInset: 버튼 영역 (항상 하단 고정)
- **장점**:
  - 키보드 표시 시 자동 스크롤
  - 버튼 항상 접근 가능
  - 작은 화면 대응

#### Sheet Header
- **좌측**: ✕ 버튼 (닫기)
- **중앙**: "종목 추가" 제목
  - 폰트: `.headline`
- **높이**: 60pt

#### 종목명 입력
- **레이블**: "종목명"
  - 폰트: `.subheadline`
  - 색상: `.secondary`
- **TextField**:
  - Placeholder: "예: 삼성전자"
  - 키보드: 기본 키보드
  - 배경: 시스템 회색 배경
  - 패딩: 12pt
  - 코너 반경: 8pt

#### 매수 금액 입력
- **레이블**: "매수 금액"
  - 폰트: `.subheadline`
  - 색상: `.secondary`
- **TextField**:
  - Placeholder: "₩ 0"
  - 키보드: 숫자 패드 (천단위 콤마 자동)
  - 배경: 시스템 회색 배경
  - 패딩: 12pt
  - 코너 반경: 8pt
  - 포맷: 통화 포맷 (자동 천단위 구분)

#### 저장 버튼
- **스타일**: Prominent Button
- **배경**: `.accentColor` (파란색)
- **텍스트**: "저장" (흰색, `.headline`)
- **높이**: 50pt
- **코너 반경**: 12pt
- **상태**:
  - 비활성: 종목명 또는 금액이 비어있을 때
  - 활성: 모든 필드 입력 완료

#### 취소 버튼
- **스타일**: Secondary Button
- **배경**: 투명
- **텍스트**: "취소" (`.accentColor`, `.headline`)
- **높이**: 50pt
- **액션**: 시트 닫기

### 2.3 인터랙션

- **입력 검증**:
  - 종목명: 공백 불가
  - 금액: 0보다 커야 함, 음수 불가
  - 조건 미충족 시 저장 버튼 비활성화
- **저장 액션**:
  1. Core Data에 저장
  2. 시트 닫기
  3. 메인 화면 자동 업데이트 (애니메이션)
- **취소 액션**: 시트 닫기 (저장 안 함)

---

## 4. 종목 편집 화면 (Sheet)

### 3.1 레이아웃

종목 추가 화면과 동일하되:
- **제목**: "종목 편집"
- **기본값**: 기존 데이터로 채워짐
- **삭제 버튼**: 제거됨 (스와이프 삭제로 대체)

```
┌─────────────────────────────────────┐
│  ✕  종목 편집                        │
├─────────────────────────────────────┤
│   ... (종목 추가와 동일) ...         │
│                                     │
│   ┌─────────────────────────────┐   │
│   │        저장                  │   │
│   └─────────────────────────────┘   │
│                                     │
│   ┌─────────────────────────────┐   │
│   │        취소                  │   │
│   └─────────────────────────────┘   │
│                                     │
│   ⚠️ 삭제는 리스트에서 스와이프       │
└─────────────────────────────────────┘
```

### 3.2 추가 요소

#### 삭제 버튼 (제거됨)
- 종목 편집 화면에서 삭제 버튼이 제거됨
- **삭제 방법**: 종목 리스트에서 스와이프하여 삭제
- 스와이프 삭제가 더 직관적인 UX 제공

---

## 5. 빈 상태 화면

### 4.1 레이아웃

```
┌─────────────────────────────────────┐
│                              ⚙️     │  ← Navigation Bar (타이틀 없음)
├─────────────────────────────────────┤
│                                     │
│                                     │
│                                     │
│           📊                        │  ← SF Symbol
│                                     │
│      아직 보유 종목이 없습니다         │  ← 제목
│                                     │
│   + 버튼을 눌러 첫 종목을 추가해보세요  │  ← 설명
│                                     │
│                                     │
│   ┌─────────────────────────────┐   │
│   │    + 종목 추가하기            │   │  ← CTA 버튼
│   └─────────────────────────────┘   │
│                                     │
│                                     │
│                                     │
│                                     │
│              [ + ]                  │
└─────────────────────────────────────┘
```

### 4.2 UI 요소

#### 아이콘
- **심볼**: SF Symbol "chart.pie.fill"
- **크기**: 80x80pt
- **색상**: `.secondary` (회색)

#### 제목
- **텍스트**: "아직 보유 종목이 없습니다"
- **폰트**: `.title2`, `.semibold`
- **색상**: `.primary`

#### 설명
- **텍스트**: "+ 버튼을 눌러 첫 종목을 추가해보세요"
- **폰트**: `.body`
- **색상**: `.secondary`

#### CTA 버튼
- **스타일**: Bordered Button
- **텍스트**: "+ 종목 추가하기"
- **테두리**: `.accentColor`
- **액션**: 종목 추가 시트 표시

---

## 6. 색상 시스템

### 5.1 차트 색상 팔레트 (순서대로 자동 할당)

1. **파란색**: `Color.blue`
2. **초록색**: `Color.green`
3. **주황색**: `Color.orange`
4. **보라색**: `Color.purple`
5. **분홍색**: `Color.pink`
6. **민트색**: `Color.mint`
7. **청록색**: `Color.teal`
8. **인디고**: `Color.indigo`
9. **노란색**: `Color.yellow`
10. **갈색**: `Color.brown`

### 5.2 시스템 색상

- **Primary**: `.primary` (다크모드 대응)
- **Secondary**: `.secondary`
- **Background**: `.systemBackground`
- **Card**: `.secondarySystemBackground`
- **Accent**: `.blue` (또는 사용자 지정 색상)

---

## 7. 타이포그래피

| 요소 | 폰트 스타일 | 크기 | 굵기 |
|------|-----------|------|------|
| Navigation Title | `.largeTitle` | 34pt | Regular |
| 총 투자 금액 | `.largeTitle` | 34pt | Bold |
| 섹션 헤더 | `.headline` | 17pt | Semibold |
| 종목명 | `.headline` | 17pt | Semibold |
| 금액 | `.subheadline` | 15pt | Regular |
| 비중 | `.headline` | 17pt | Regular |
| 버튼 텍스트 | `.headline` | 17pt | Semibold |
| 레이블 | `.subheadline` | 15pt | Regular |
| 빈 상태 제목 | `.title2` | 22pt | Semibold |
| 빈 상태 설명 | `.body` | 17pt | Regular |

---

## 8. 스페이싱 & 레이아웃

### 7.1 여백 (Padding)
- **섹션 간**: 24pt
- **카드 간**: 8pt
- **화면 좌우**: 16pt
- **카드 내부**: 16pt
- **텍스트 그룹**: 4pt

### 7.2 크기
- **버튼 높이**: 50pt
- **카드 최소 높이**: 60pt
- **차트 크기**:
  - AspectRatio: 1:1 (정사각형)
  - 최대 높이: 250pt
  - 동적 크기 조정 (화면 너비 기반)
- **FAB 크기**: 56x56pt
- **범례 색상 인디케이터**: 8x8pt (원형)

### 7.3 코너 반경
- **카드**: 12pt
- **버튼**: 12pt
- **TextField**: 8pt
- **FAB**: 28pt (원형)

---

## 9. 애니메이션

### 8.1 화면 전환
- **Sheet 표시/닫기**: 기본 슬라이드 애니메이션
- **리스트 아이템 추가**: Fade + Slide from bottom (0.3초)
- **리스트 아이템 삭제**: Fade + Slide to trailing (0.3초)

### 8.2 차트 업데이트
- **데이터 변경 시**: Smooth transition (0.5초)
- **이징**: `.easeInOut`

### 8.3 인터랙션
- **버튼 탭**: Scale down (0.95) + 스프링 애니메이션
- **FAB**: Bounce 효과

---

## 10. 다크 모드

### 9.1 자동 대응
- 모든 색상은 시스템 색상 사용
- `.primary`, `.secondary`, `.systemBackground` 자동 전환

### 9.2 차트 색상
- 라이트/다크 모드 모두에서 가시성 유지
- 필요시 색상 밝기 자동 조정

---

## 11. 접근성 (Accessibility)

### 10.1 VoiceOver
- 모든 버튼에 적절한 레이블 제공
- 차트 데이터는 텍스트로도 읽을 수 있도록

### 10.2 Dynamic Type
- 모든 텍스트는 사용자 설정 폰트 크기에 대응

### 10.3 색상 대비
- WCAG AA 기준 충족 (4.5:1 이상)

---

## 12. 기술 구현 세부사항

### 11.1 차트 레이아웃
- **PortfolioChartView**:
  - 고정 높이 제거 (이전: 280pt)
  - AspectRatio(1, contentMode: .fit) 사용
  - frame(maxHeight: 250) 제약
  - 장점: 반응형 디자인, 다양한 화면 크기 대응

- **MainDashboardView**:
  - 차트 컨테이너 고정 높이 제거 (이전: 360pt)
  - 동적 높이 자동 계산
  - 장점: 콘텐츠에 맞춰 자연스러운 레이아웃

### 11.2 커스텀 범례
- **구현**:
  - LazyVGrid 사용 (2개 컬럼)
  - ScrollView로 감싸기
  - gridItem: GridItem(.flexible()) 2개
  - spacing: horizontal 12pt, vertical 8pt
- **아이템 구성**:
  - Circle().fill(color).frame(width: 8, height: 8)
  - Text(name).font(.caption)
  - Text(percentage).font(.caption).foregroundColor(.secondary)

### 11.3 ScrollView + safeAreaInset 패턴
- **AddStockView & SeedMoneySettingsView**:
  - ScrollView: 입력 폼 영역
  - safeAreaInset(edge: .bottom): 버튼 영역
- **장점**:
  - 키보드 표시 시 자동 스크롤
  - 버튼 항상 화면 하단 고정
  - 작은 화면에서도 모든 콘텐츠 접근 가능
  - iOS 네이티브 동작과 일치

### 11.4 보유 종목 리스트 표시 제한
- **기본 표시 개수**: 6개
- **동작 방식**:
  - 6개 이하: 전체 표시
  - 6개 초과: 처음 6개만 표시 + "더 보기" 힌트
  - 스크롤 시 추가 종목 표시
- **구현**:
  ```swift
  let visibleCount = 6
  let displayedHoldings = holdings.prefix(visibleCount)
  let hasMore = holdings.count > visibleCount
  ```
- **섹션 헤더**: "보유 종목 (표시개수/전체개수)"
  - 예: "보유 종목 (6/10)"

### 11.5 Navigation Bar 숨김
- **타이틀**: 없음 (.navigationTitle 제거 또는 빈 문자열)
- **스타일**: .inline (Large Title 비활성)
- **표시 요소**: 설정 버튼(⚙️)만 표시
- **장점**: 화면 공간 효율적 사용

### 11.6 시드머니 레이블 숨김
- **숨김 대상**: "총 시드머니" 레이블 및 금액만 숨김
- **표시 유지**: 투자 금액/남은 현금 2단 카드는 그대로 표시
- **시드머니 수정**: 설정 화면에서만 가능
- **장점**: 핵심 정보(투자금/현금)는 유지하면서 화면 간소화
