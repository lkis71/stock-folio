# 매매일지-포트폴리오 자동 동기화 화면설계서

## 문서 정보

**버전:** v1.0
**최종 수정일:** 2024-12-30
**작성자:** Claude Code

## 변경 이력

### v1.0 (2024-12-30)
- 초기 작성
- 포트폴리오 리스트 UI 개선
- 종목 추가/수정 폼 UI 개선

---

## 1. 포트폴리오 리스트 개선

### 1.1 레이아웃

```
┌──────────────────────────────────────────────────────────┐
│ 보유 종목 (3/15)                                          │
├──────────────────────────────────────────────────────────┤
│ ┌────────────────────────────────────────────────────┐   │
│ │▌ 삼성전자                                           │   │
│ │  100주 · 평균 72,500원             7,250,000원      │   │
│ │                                         35.2%      │   │
│ └────────────────────────────────────────────────────┘   │
│ ┌────────────────────────────────────────────────────┐   │
│ │▌ SK하이닉스                                         │   │
│ │  50주 · 평균 85,000원              4,250,000원      │   │
│ │                                         20.6%      │   │
│ └────────────────────────────────────────────────────┘   │
│ ┌────────────────────────────────────────────────────┐   │
│ │▌ 네이버                                             │   │
│ │  30주 · 평균 210,000원             6,300,000원      │   │
│ │                                         30.5%      │   │
│ └────────────────────────────────────────────────────┘   │
│                                                          │
│                    ↓ 더보기                              │
└──────────────────────────────────────────────────────────┘
```

### 1.2 구성 요소

**종목 행 (StockRowView)**
- 좌측: 색상 인디케이터 (4pt 너비)
- 중앙 상단: 종목명 (`.subheadline`, `.medium`)
- 중앙 하단: 수량 + 평균 매입가 (`.caption2`, `.secondary`)
- 우측 상단: 총 투자금액 (`.subheadline`, `.medium`)
- 우측 하단: 비중 % (`.caption`, 색상별)

**레거시 호환**
- 수량이 0인 경우: 기존처럼 금액만 표시

---

## 2. 종목 추가/수정 폼 (v3.0 제거됨)

> **Note**: v3.0부터 포트폴리오는 매매일지 기반으로만 관리됩니다.
> 종목 추가/수정 폼, 탭 편집, 스와이프 삭제 기능은 제거되었습니다.
> 매매일지에서 매수/매도 기록을 추가하면 포트폴리오에 자동으로 반영됩니다.

---

## 3. 인터랙션 정의

| 인터랙션 | 동작 | 피드백 |
|----------|------|--------|
| ~~수량 입력~~ | ~~숫자만 허용, 천단위 포맷~~ | v3.0 제거됨 |
| ~~평균가 입력~~ | ~~숫자만 허용, 천단위 포맷~~ | v3.0 제거됨 |
| ~~저장 탭~~ | ~~종목명/수량/가격 검증 → 저장~~ | v3.0 제거됨 |
| ~~종목 행 탭~~ | ~~편집 시트 열기~~ | v3.0 제거됨 |
| ~~종목 행 스와이프~~ | ~~삭제 버튼 노출~~ | v3.0 제거됨 |
| Pull to Refresh | 매매일지 기반 재동기화 | 로딩 인디케이터 |

---

## 4. 스타일 가이드

### 4.1 타이포그래피

| 용도 | 폰트 | 색상 |
|------|------|------|
| 종목명 | `.subheadline`, `.medium` | `.primary` |
| 수량/평균가 | `.caption2` | `.secondary` |
| 총 금액 | `.subheadline`, `.medium` | `.primary` |
| 비중 % | `.caption`, `.semibold` | 종목 색상 |
| 라벨 | `.caption` | `.secondary` |

### 4.2 색상

| 용도 | 색상 |
|------|------|
| 카드 배경 | `.secondarySystemBackground` |
| 총액 표시 배경 | `.tertiarySystemBackground` |
| 색상 인디케이터 | 종목별 지정 색상 |
| 저장 버튼 (활성) | `.accentColor` |
| 저장 버튼 (비활성) | `.gray` |

### 4.3 레이아웃

| 요소 | 값 |
|------|-----|
| 카드 내부 패딩 | 10pt |
| 요소 간격 | 4-8pt |
| 색상 인디케이터 너비 | 4pt |
| 카드 모서리 반경 | 10pt |
| 입력 필드 패딩 | 12pt |

---

## 5. 접근성 고려사항

| 항목 | 구현 |
|------|------|
| VoiceOver | 종목별 "종목명, 수량, 평균가, 총액, 비중" 읽기 |
| 힌트 | "탭하여 편집, 스와이프하여 삭제" |
| 큰 텍스트 | `.minimumScaleFactor(0.7)` 적용 |
| 색상 대비 | 충분한 명암비 확보 |

---

## 6. 데이터 표시 규칙

### 6.1 금액 포맷

| 조건 | 표시 형식 |
|------|----------|
| 1만원 미만 | 9,999원 |
| 1만원 이상 | 10,000원 |
| 1억원 이상 | 100,000,000원 (축약 없음) |

### 6.2 수량 표시

| 조건 | 표시 형식 |
|------|----------|
| 기본 | "100주" |
| 1,000주 이상 | "1,000주" |

### 6.3 비중 표시

| 조건 | 표시 형식 |
|------|----------|
| 기본 | "35.2%" |
| 100% 초과 | "100.0%" (상한) |
