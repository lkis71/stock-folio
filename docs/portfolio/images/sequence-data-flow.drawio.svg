<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="700px" height="550px" viewBox="-0.5 -0.5 700 550" content="&lt;mxfile host=&quot;app.diagrams.net&quot;&gt;&lt;diagram name=&quot;Sequence Data Flow&quot; id=&quot;seq-flow&quot;&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs>
    <marker id="arrow5" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333"/>
    </marker>
    <marker id="arrow-dashed5" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="700" height="550" fill="#FFFFFF"/>

  <!-- Title -->
  <text x="350" y="25" font-family="SF Pro Display, -apple-system, sans-serif" font-size="16" font-weight="600" text-anchor="middle" fill="#333333">데이터 흐름도</text>

  <!-- Participants -->
  <!-- User -->
  <rect x="25" y="45" width="70" height="35" rx="5" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="60" y="67" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" text-anchor="middle" fill="#1976D2">User</text>
  <line x1="60" y1="80" x2="60" y2="520" stroke="#1976D2" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Main View -->
  <rect x="130" y="45" width="90" height="35" rx="5" fill="#E8F5E9" stroke="#388E3C" stroke-width="2"/>
  <text x="175" y="67" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" text-anchor="middle" fill="#388E3C">Main View</text>
  <line x1="175" y1="80" x2="175" y2="520" stroke="#388E3C" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- ViewModel -->
  <rect x="260" y="45" width="120" height="35" rx="5" fill="#FFF3E0" stroke="#F57C00" stroke-width="2"/>
  <text x="320" y="67" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#F57C00">PortfolioViewModel</text>
  <line x1="320" y1="80" x2="320" y2="520" stroke="#F57C00" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Repository -->
  <rect x="415" y="45" width="100" height="35" rx="5" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2"/>
  <text x="465" y="67" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" text-anchor="middle" fill="#7B1FA2">StockRepository</text>
  <line x1="465" y1="80" x2="465" y2="520" stroke="#7B1FA2" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Core Data -->
  <rect x="555" y="45" width="90" height="35" rx="5" fill="#E0F7FA" stroke="#00838F" stroke-width="2"/>
  <text x="600" y="67" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" text-anchor="middle" fill="#00838F">Core Data</text>
  <line x1="600" y1="80" x2="600" y2="520" stroke="#00838F" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Section: 앱 실행 -->
  <rect x="10" y="95" width="680" height="120" rx="5" fill="#F5F5F5" stroke="#BDBDBD" stroke-width="1" stroke-dasharray="5,3"/>
  <text x="20" y="110" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#666666">앱 실행</text>

  <!-- Messages: 앱 실행 -->
  <line x1="60" y1="130" x2="175" y2="130" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="118" y="123" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">앱 실행</text>

  <line x1="175" y1="150" x2="320" y2="150" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="248" y="143" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">초기화</text>

  <line x1="320" y1="165" x2="465" y2="165" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="392" y="158" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">저장된 종목 조회</text>

  <line x1="465" y1="180" x2="600" y2="180" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="532" y="173" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">fetch 요청</text>

  <line x1="600" y1="195" x2="465" y2="195" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="532" y="188" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">종목 리스트</text>

  <!-- Section: 종목 추가 -->
  <rect x="10" y="230" width="680" height="270" rx="5" fill="#FFF8E1" stroke="#FFB74D" stroke-width="1" stroke-dasharray="5,3"/>
  <text x="20" y="245" font-family="SF Pro Display, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#F57C00">종목 추가</text>

  <!-- Continue with return messages -->
  <line x1="465" y1="265" x2="320" y2="265" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="392" y="258" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">종목 리스트</text>

  <line x1="320" y1="285" x2="175" y2="285" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="248" y="278" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">UI 업데이트</text>

  <line x1="175" y1="305" x2="60" y2="305" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="118" y="298" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">차트 + 종목 리스트 표시</text>

  <!-- Messages: 종목 추가 -->
  <line x1="60" y1="335" x2="175" y2="335" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="118" y="328" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">종목 추가 버튼 클릭</text>

  <rect x="165" y="345" width="20" height="20" fill="#E8F5E9" stroke="#388E3C" stroke-width="1"/>
  <text x="175" y="380" font-family="SF Pro Display, -apple-system, sans-serif" font-size="9" text-anchor="middle" fill="#388E3C">입력 폼 표시</text>

  <line x1="60" y1="395" x2="175" y2="395" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="118" y="388" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">종목명, 매수금액 입력</text>

  <line x1="175" y1="415" x2="320" y2="415" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="248" y="408" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">종목 추가 요청</text>

  <line x1="320" y1="435" x2="465" y2="435" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="392" y="428" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">데이터 저장 요청</text>

  <line x1="465" y1="450" x2="600" y2="450" stroke="#333333" stroke-width="1.5" marker-end="url(#arrow5)"/>
  <text x="532" y="443" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#333333">save</text>

  <line x1="600" y1="465" x2="465" y2="465" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="532" y="458" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">저장 완료</text>

  <line x1="465" y1="480" x2="320" y2="480" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="392" y="473" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">저장 완료</text>

  <line x1="320" y1="495" x2="175" y2="495" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="248" y="488" font-family="SF Pro Display, -apple-system, sans-serif" font-size="10" text-anchor="middle" fill="#666666">UI 업데이트 (새로운 차트)</text>

  <line x1="175" y1="510" x2="60" y2="510" stroke="#666666" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-dashed5)"/>
  <text x="118" y="503" font-family="SF Pro Display, -apple-system, sans-serif" font-size="9" text-anchor="middle" fill="#666666">업데이트된 포트폴리오 표시</text>
</svg>
